import{f as F,u as z,g as $,j as e,B as R,a1 as T,v as k,x as G,k as N,l as D,a as S,t as L,a2 as M,a3 as _,a4 as U}from"./index-C-4AFNO7.js";import{H}from"./HexContainer-Ccq6LLuc.js";import{c as J}from"./selectors-BfVctv7J.js";import{b as O}from"./useApi-D27OJqXo.js";import{S as V}from"./Stack-cHEUxKAk.js";import{T as y}from"./Text-Bpvfj0Xl.js";import{G as W}from"./Group-CIVdmQNo.js";import{I as X}from"./Image-B2O5Zm9s.js";import{F as Y}from"./FileInput--HYmVBXe.js";import{a as Z}from"./DirectionProvider-CeuBSB5J.js";import{B as q}from"./Button-BR3F4-qk.js";var A={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const K={},Q=k((t,{radius:n,color:s,variant:a,autoContrast:d})=>{const l=t.variantColorResolver({color:s||t.primaryColor,theme:t,variant:a||"light",autoContrast:d});return{root:{"--alert-radius":n===void 0?void 0:G(n),"--alert-bg":s||a?l.background:void 0,"--alert-color":l.color,"--alert-bd":s||a?l.border:void 0}}}),E=F((t,n)=>{const s=z("Alert",K,t),{classNames:a,className:d,style:l,styles:j,unstyled:o,vars:w,radius:h,color:m,title:c,children:g,id:C,icon:f,withCloseButton:p,onClose:x,closeButtonLabel:b,variant:r,autoContrast:v,...u}=s,i=$({name:"Alert",classes:A,props:s,className:d,style:l,classNames:a,styles:j,unstyled:o,vars:w,varsResolver:Q}),I=Z(C),B=c&&`${I}-title`||void 0,P=`${I}-body`;return e.jsx(R,{id:I,...i("root",{variant:r}),variant:r,ref:n,...u,role:"alert","aria-describedby":P,"aria-labelledby":B,children:e.jsxs("div",{...i("wrapper"),children:[f&&e.jsx("div",{...i("icon"),children:f}),e.jsxs("div",{...i("body"),children:[c&&e.jsx("div",{...i("title"),"data-with-close-button":p||void 0,children:e.jsx("span",{id:B,...i("label"),children:c})}),g&&e.jsx("div",{id:P,...i("message"),"data-variant":r,children:g})]}),p&&e.jsx(T,{...i("closeButton"),onClick:x,variant:"transparent",size:16,iconSize:16,"aria-label":b,unstyled:o})]})})});E.classes=A;E.displayName="@mantine/core/Alert";function me({type:t="avatar",close:n}){var p,x,b;const s=N(),{user:a}=D(J),{patch:d,loading:l}=O(),j=r=>r?`http://localhost:3000/${r}`:null,[o,w]=S.useState({preview:j(t==="avatar"?(p=a==null?void 0:a.profileImage)==null?void 0:p.path:(x=a==null?void 0:a.coverImage)==null?void 0:x.path),file:null}),[h,m]=S.useState(null),c=a==null?void 0:a.id,g=(b=a==null?void 0:a.userType)==null?void 0:b.toLowerCase(),C=r=>{if(!r)return;if(!M.includes(r.type))return m("Only JPEG, JPG, PNG, or WEBP images are allowed.");if(r.size/1024/1024>_)return m(`File size should be less than ${_}MB.`);m(null);const v=new FileReader;v.onload=u=>{w({preview:u.target.result,file:r})},v.readAsDataURL(r)},f=async()=>{if(!o.file||!c)return;const r=new FormData;r.append(t==="avatar"?"profileImageFile":"coverImageFile",o.file);const v=`/${g}-profiles/${c}/${t==="avatar"?"profile-pic":"cover-pic"}`;try{await d(v,r,{"Content-Type":"multipart/form-data"}),s(U()),n()}catch(u){m("Failed to upload image.",u)}};return e.jsxs(V,{children:[e.jsx(y,{weight:500,size:"sm",children:t==="avatar"?"Profile Picture":"Cover Photo"}),t==="avatar"?e.jsx(W,{justify:"center",children:e.jsx(H,{size:200,background:L.colors.inputBgColor[0],children:o.preview?e.jsx("img",{src:o.preview,alt:"Avatar",style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx(y,{size:"xs",c:"dimmed",ta:"center",mt:"xl",children:"No image available"})})}):o.preview?e.jsx(X,{src:o.preview,alt:"Cover Preview",radius:"md",withPlaceholder:!0,height:150,fit:"cover"}):e.jsx(y,{size:"xs",c:"dimmed",ta:"center",mt:"sm",children:"No image available"}),e.jsx(Y,{placeholder:`Select ${t==="avatar"?"Avatar":"Cover"} Image`,accept:"image/png,image/jpeg,image/webp",onChange:C,error:h}),h&&e.jsx(E,{color:"red",title:"Error",mt:"sm",children:h}),e.jsxs(q,{variant:"primary",onClick:f,loading:l,children:["Save ",t==="avatar"?"Avatar":"Cover"]})]})}export{me as E};
