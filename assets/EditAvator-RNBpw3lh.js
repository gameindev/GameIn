import{f as F,u as $,g as z,j as e,B as T,a1 as R,v as k,w as G,k as N,l as D,a as S,t as L,a2 as M,a3 as _,a4 as U}from"./index-D9oEtHeb.js";import{H}from"./HexContainer-zsQTPXMB.js";import{c as J}from"./selectors-BfVctv7J.js";import{a as O}from"./useApi-HEZO75xY.js";import{S as V}from"./Stack-CmwLihlq.js";import{T as E}from"./Text-8hgcObZb.js";import{G as W}from"./Group-B6akqJOh.js";import{I as X}from"./Image-DLpckFmT.js";import{F as Y}from"./FileInput-CX6dCDu1.js";import{a as Z}from"./DirectionProvider-D6EKyNqO.js";import{B as q}from"./Button-DE9b1J-V.js";var A={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const K={},Q=k((t,{radius:c,color:s,variant:a,autoContrast:h})=>{const i=t.variantColorResolver({color:s||t.primaryColor,theme:t,variant:a||"light",autoContrast:h});return{root:{"--alert-radius":c===void 0?void 0:G(c),"--alert-bg":s||a?i.background:void 0,"--alert-color":i.color,"--alert-bd":s||a?i.border:void 0}}}),B=F((t,c)=>{const s=$("Alert",K,t),{classNames:a,className:h,style:i,styles:C,unstyled:d,vars:g,radius:I,color:l,title:f,children:m,id:p,icon:x,withCloseButton:b,onClose:j,closeButtonLabel:w,variant:v,autoContrast:P,...y}=s,o=z({name:"Alert",classes:A,props:s,className:h,style:i,classNames:a,styles:C,unstyled:d,vars:g,varsResolver:Q}),r=Z(p),n=f&&`${r}-title`||void 0,u=`${r}-body`;return e.jsx(T,{id:r,...o("root",{variant:v}),variant:v,ref:c,...y,role:"alert","aria-describedby":u,"aria-labelledby":n,children:e.jsxs("div",{...o("wrapper"),children:[x&&e.jsx("div",{...o("icon"),children:x}),e.jsxs("div",{...o("body"),children:[f&&e.jsx("div",{...o("title"),"data-with-close-button":b||void 0,children:e.jsx("span",{id:n,...o("label"),children:f})}),m&&e.jsx("div",{id:u,...o("message"),"data-variant":v,children:m})]}),b&&e.jsx(R,{...o("closeButton"),onClick:j,variant:"transparent",size:16,iconSize:16,"aria-label":w,unstyled:d})]})})});B.classes=A;B.displayName="@mantine/core/Alert";function me({type:t="avatar",close:c}){var j,w,v,P,y,o;const s=N(),{user:a}=D(J),{patch:h,loading:i}=O(),C=r=>r?`https://grvroy.com/nest/${r}`:null,d=(j=a==null?void 0:a.userType)==null?void 0:j.toLowerCase(),g=d==="brand"?"brandProfile":d==="creator"?"creatorProfile":"",I=(w=a==null?void 0:a[g])==null?void 0:w.id,[l,f]=S.useState({preview:C(t==="avatar"?(P=(v=a==null?void 0:a[g])==null?void 0:v.profileImage)==null?void 0:P.path:(o=(y=a==null?void 0:a[g])==null?void 0:y.coverImage)==null?void 0:o.path),file:null}),[m,p]=S.useState(null),x=r=>{if(!r)return;if(!M.includes(r.type))return p("Only JPEG, JPG, PNG, or WEBP images are allowed.");if(r.size/1024/1024>_)return p(`File size should be less than ${_}MB.`);p(null);const n=new FileReader;n.onload=u=>{f({preview:u.target.result,file:r})},n.readAsDataURL(r)},b=async()=>{if(!l.file||!I)return;const r=new FormData;r.append(t==="avatar"?"profileImageFile":"coverImageFile",l.file);const n=`/${d}-profiles/${I}/${t==="avatar"?"profile-pic":"cover-pic"}`;try{await h(n,r,{"Content-Type":"multipart/form-data"}),s(U()),c()}catch(u){p("Failed to upload image.",u)}};return e.jsxs(V,{children:[e.jsx(E,{weight:500,size:"sm",children:t==="avatar"?"Profile Picture":"Cover Photo"}),t==="avatar"?e.jsx(W,{justify:"center",children:e.jsx(H,{size:200,background:L.colors.inputBgColor[0],children:l.preview?e.jsx("img",{src:l.preview,alt:"Avatar",style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx(E,{size:"xs",c:"dimmed",ta:"center",mt:"xl",children:"No image available"})})}):l.preview?e.jsx(X,{src:l.preview,alt:"Cover Preview",radius:"md",withPlaceholder:!0,height:150,fit:"cover"}):e.jsx(E,{size:"xs",c:"dimmed",ta:"center",mt:"sm",children:"No image available"}),e.jsx(Y,{placeholder:`Select ${t==="avatar"?"Avatar":"Cover"} Image`,accept:"image/png,image/jpeg,image/webp",onChange:x,error:m}),m&&e.jsx(B,{color:"red",title:"Error",mt:"sm",children:m}),e.jsxs(q,{variant:"primary",onClick:b,loading:i,children:["Save ",t==="avatar"?"Avatar":"Cover"]})]})}export{me as E};
