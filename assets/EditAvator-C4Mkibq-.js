import{f as F,u as $,g as z,j as e,B as T,a1 as R,v as k,x as G,k as N,l as D,a as S,t as L,a2 as M,a3 as _,a4 as U}from"./index-BP5I_U89.js";import{H}from"./HexContainer-BSRDWoyS.js";import{c as J}from"./selectors-BfVctv7J.js";import{b as O}from"./useApi-Bipsifky.js";import{S as V}from"./Stack-CDZGMFlh.js";import{T as I}from"./Text-x9c1eFgR.js";import{G as W}from"./Group-CKC39Eof.js";import{I as X}from"./Image-B0KUzfd5.js";import{F as Y}from"./FileInput-C-EDUidM.js";import{a as Z}from"./DirectionProvider-0RmTMhF_.js";import{B as q}from"./Button-BqnFXR5e.js";var A={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const K={},Q=k((r,{radius:d,color:i,variant:a,autoContrast:p})=>{const l=r.variantColorResolver({color:i||r.primaryColor,theme:r,variant:a||"light",autoContrast:p});return{root:{"--alert-radius":d===void 0?void 0:G(d),"--alert-bg":i||a?l.background:void 0,"--alert-color":l.color,"--alert-bd":i||a?l.border:void 0}}}),P=F((r,d)=>{const i=$("Alert",K,r),{classNames:a,className:p,style:l,styles:w,unstyled:s,vars:y,radius:u,color:v,title:n,children:h,id:g,icon:f,withCloseButton:x,onClose:b,closeButtonLabel:j,variant:m,autoContrast:C,...t}=i,o=z({name:"Alert",classes:A,props:i,className:p,style:l,classNames:a,styles:w,unstyled:s,vars:y,varsResolver:Q}),c=Z(g),E=n&&`${c}-title`||void 0,B=`${c}-body`;return e.jsx(T,{id:c,...o("root",{variant:m}),variant:m,ref:d,...t,role:"alert","aria-describedby":B,"aria-labelledby":E,children:e.jsxs("div",{...o("wrapper"),children:[f&&e.jsx("div",{...o("icon"),children:f}),e.jsxs("div",{...o("body"),children:[n&&e.jsx("div",{...o("title"),"data-with-close-button":x||void 0,children:e.jsx("span",{id:E,...o("label"),children:n})}),h&&e.jsx("div",{id:B,...o("message"),"data-variant":m,children:h})]}),x&&e.jsx(R,{...o("closeButton"),onClick:b,variant:"transparent",size:16,iconSize:16,"aria-label":j,unstyled:s})]})})});P.classes=A;P.displayName="@mantine/core/Alert";function me({type:r="avatar",close:d}){var b,j,m,C;const i=N(),{user:a}=D(J),{patch:p,loading:l}=O(),w=t=>t?`https://grvroy.com/nest/${t}`:null,[s,y]=S.useState({preview:w(r==="avatar"?(b=a==null?void 0:a.profileImage)==null?void 0:b.path:(j=a==null?void 0:a.coverImage)==null?void 0:j.path),file:null}),[u,v]=S.useState(null),n=(m=a==null?void 0:a.userType)==null?void 0:m.toLowerCase(),h=n==="brand"?"brandProfile":n==="creator"?"creatorProfile":"",g=(C=a==null?void 0:a[h])==null?void 0:C.id,f=t=>{if(!t)return;if(!M.includes(t.type))return v("Only JPEG, JPG, PNG, or WEBP images are allowed.");if(t.size/1024/1024>_)return v(`File size should be less than ${_}MB.`);v(null);const o=new FileReader;o.onload=c=>{y({preview:c.target.result,file:t})},o.readAsDataURL(t)},x=async()=>{if(!s.file||!g)return;const t=new FormData;t.append(r==="avatar"?"profileImageFile":"coverImageFile",s.file);const o=`/${n}-profiles/${g}/${r==="avatar"?"profile-pic":"cover-pic"}`;try{await p(o,t,{"Content-Type":"multipart/form-data"}),i(U()),d()}catch(c){v("Failed to upload image.",c)}};return e.jsxs(V,{children:[e.jsx(I,{weight:500,size:"sm",children:r==="avatar"?"Profile Picture":"Cover Photo"}),r==="avatar"?e.jsx(W,{justify:"center",children:e.jsx(H,{size:200,background:L.colors.inputBgColor[0],children:s.preview?e.jsx("img",{src:s.preview,alt:"Avatar",style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx(I,{size:"xs",c:"dimmed",ta:"center",mt:"xl",children:"No image available"})})}):s.preview?e.jsx(X,{src:s.preview,alt:"Cover Preview",radius:"md",withPlaceholder:!0,height:150,fit:"cover"}):e.jsx(I,{size:"xs",c:"dimmed",ta:"center",mt:"sm",children:"No image available"}),e.jsx(Y,{placeholder:`Select ${r==="avatar"?"Avatar":"Cover"} Image`,accept:"image/png,image/jpeg,image/webp",onChange:f,error:u}),u&&e.jsx(P,{color:"red",title:"Error",mt:"sm",children:u}),e.jsxs(q,{variant:"primary",onClick:x,loading:l,children:["Save ",r==="avatar"?"Avatar":"Cover"]})]})}export{me as E};
