import{f as F,u as $,g as z,j as a,B as T,a1 as R,v as k,x as G,k as N,l as D,a as S,t as L,a2 as M,a3 as _,a4 as U}from"./index-BvCOVkLD.js";import{H}from"./HexContainer-CUGkvrPJ.js";import{c as J}from"./selectors-BfVctv7J.js";import{b as O}from"./useApi-BwtuBH04.js";import{S as V}from"./Stack-BaPA_i4L.js";import{T as E}from"./Text-CuMorHTw.js";import{G as W}from"./Group-mkW3al6E.js";import{I as X}from"./Image-BDImwyx1.js";import{F as Y}from"./FileInput-xzTxsHB7.js";import{a as Z}from"./DirectionProvider-CK_z1yMt.js";import{B as q}from"./Button-D3wcv81E.js";var A={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const K={},Q=k((t,{radius:c,color:s,variant:e,autoContrast:h})=>{const i=t.variantColorResolver({color:s||t.primaryColor,theme:t,variant:e||"light",autoContrast:h});return{root:{"--alert-radius":c===void 0?void 0:G(c),"--alert-bg":s||e?i.background:void 0,"--alert-color":i.color,"--alert-bd":s||e?i.border:void 0}}}),B=F((t,c)=>{const s=$("Alert",K,t),{classNames:e,className:h,style:i,styles:I,unstyled:d,vars:m,radius:x,color:l,title:f,children:p,id:v,icon:b,withCloseButton:j,onClose:w,closeButtonLabel:y,variant:u,autoContrast:P,...C}=s,o=z({name:"Alert",classes:A,props:s,className:h,style:i,classNames:e,styles:I,unstyled:d,vars:m,varsResolver:Q}),r=Z(v),n=f&&`${r}-title`||void 0,g=`${r}-body`;return a.jsx(T,{id:r,...o("root",{variant:u}),variant:u,ref:c,...C,role:"alert","aria-describedby":g,"aria-labelledby":n,children:a.jsxs("div",{...o("wrapper"),children:[b&&a.jsx("div",{...o("icon"),children:b}),a.jsxs("div",{...o("body"),children:[f&&a.jsx("div",{...o("title"),"data-with-close-button":j||void 0,children:a.jsx("span",{id:n,...o("label"),children:f})}),p&&a.jsx("div",{id:g,...o("message"),"data-variant":u,children:p})]}),j&&a.jsx(R,{...o("closeButton"),onClick:w,variant:"transparent",size:16,iconSize:16,"aria-label":y,unstyled:d})]})})});B.classes=A;B.displayName="@mantine/core/Alert";function me({type:t="avatar",close:c}){var w,y,u,P,C,o;const s=N(),{user:e}=D(J),{patch:h,loading:i}=O(),I=r=>r?`https://grvroy.com/nest/${r}`:null,d=(w=e==null?void 0:e.userType)==null?void 0:w.toLowerCase(),m=d==="brand"?"brandProfile":d==="creator"?"creatorProfile":"",x=(y=e==null?void 0:e[m])==null?void 0:y.id,[l,f]=S.useState({preview:I(t==="avatar"?(P=(u=e==null?void 0:e[m])==null?void 0:u.profileImage)==null?void 0:P.path:(o=(C=e==null?void 0:e[m])==null?void 0:C.coverImage)==null?void 0:o.path),file:null}),[p,v]=S.useState(null);console.log(e),console.log(m),console.log(x);const b=r=>{if(!r)return;if(!M.includes(r.type))return v("Only JPEG, JPG, PNG, or WEBP images are allowed.");if(r.size/1024/1024>_)return v(`File size should be less than ${_}MB.`);v(null);const n=new FileReader;n.onload=g=>{f({preview:g.target.result,file:r})},n.readAsDataURL(r)},j=async()=>{if(!l.file||!x)return;const r=new FormData;r.append(t==="avatar"?"profileImageFile":"coverImageFile",l.file);const n=`/${d}-profiles/${x}/${t==="avatar"?"profile-pic":"cover-pic"}`;try{await h(n,r,{"Content-Type":"multipart/form-data"}),s(U()),c()}catch(g){v("Failed to upload image.",g)}};return a.jsxs(V,{children:[a.jsx(E,{weight:500,size:"sm",children:t==="avatar"?"Profile Picture":"Cover Photo"}),t==="avatar"?a.jsx(W,{justify:"center",children:a.jsx(H,{size:200,background:L.colors.inputBgColor[0],children:l.preview?a.jsx("img",{src:l.preview,alt:"Avatar",style:{width:"100%",height:"100%",objectFit:"cover"}}):a.jsx(E,{size:"xs",c:"dimmed",ta:"center",mt:"xl",children:"No image available"})})}):l.preview?a.jsx(X,{src:l.preview,alt:"Cover Preview",radius:"md",withPlaceholder:!0,height:150,fit:"cover"}):a.jsx(E,{size:"xs",c:"dimmed",ta:"center",mt:"sm",children:"No image available"}),a.jsx(Y,{placeholder:`Select ${t==="avatar"?"Avatar":"Cover"} Image`,accept:"image/png,image/jpeg,image/webp",onChange:b,error:p}),p&&a.jsx(B,{color:"red",title:"Error",mt:"sm",children:p}),a.jsxs(q,{variant:"primary",onClick:j,loading:i,children:["Save ",t==="avatar"?"Avatar":"Cover"]})]})}export{me as E};
