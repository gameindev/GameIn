import{a as w,f as W,u as N,b as ee,j as g,K as oe,B as Ae,r as Ve,y as $e,$ as te,M as F,J as Ke,g as He,v as Le,a0 as Ue,x as Xe}from"./index-BP5I_U89.js";import{u as Ye,a as Be}from"./useApi-Bipsifky.js";import{u as qe,a as Je}from"./DirectionProvider-0RmTMhF_.js";import{F as Ze,g as Ge,a as Qe}from"./get-floating-position-CZWGArw4.js";import{m as We,n as eo,i as oo,u as to,o as ro,p as so,s as ao,q as J,j as Z,l as G,k as no,r as io,b as lo,O as co}from"./FocusTrap-DCKgsFrM.js";import{a as re}from"./Text-x9c1eFgR.js";import{c as uo}from"./ActionIcon-B-d1yO3M.js";const fo=()=>{};function po(e,a={active:!0}){return typeof e!="function"||!a.active?a.onKeyDown||fo:s=>{var r;s.key==="Escape"&&(e(s),(r=a.onTrigger)==null||r.call(a))}}const Q=["mousedown","touchstart"];function wo(e,a,s){const r=w.useRef(null);return w.useEffect(()=>{const i=d=>{const{target:l}=d??{};if(Array.isArray(s)){const n=(l==null?void 0:l.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(l)&&l.tagName!=="HTML";s.every(c=>!!c&&!d.composedPath().includes(c))&&!n&&e()}else r.current&&!r.current.contains(l)&&e()};return(a||Q).forEach(d=>document.addEventListener(d,i)),()=>{(a||Q).forEach(d=>document.removeEventListener(d,i))}},[r,e,s]),r}const[go,se]=uo("Popover component was not found in the tree");var ae={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const mo={},z=W((e,a)=>{var C,E,y,v;const s=N("PopoverDropdown",mo,e),{className:r,style:i,vars:d,children:l,onKeyDownCapture:n,variant:t,classNames:c,styles:f,...m}=s,o=se(),R=We({opened:o.opened,shouldReturnFocus:o.returnFocus}),D=o.withRoles?{"aria-labelledby":o.getTargetId(),id:o.getDropdownId(),role:"dialog",tabIndex:-1}:{},O=ee(a,o.floating);return o.disabled?null:g.jsx(oe,{...o.portalProps,withinPortal:o.withinPortal,children:g.jsx(re,{mounted:o.opened,...o.transitionProps,transition:((C=o.transitionProps)==null?void 0:C.transition)||"fade",duration:((E=o.transitionProps)==null?void 0:E.duration)??150,keepMounted:o.keepMounted,exitDuration:typeof((y=o.transitionProps)==null?void 0:y.exitDuration)=="number"?o.transitionProps.exitDuration:(v=o.transitionProps)==null?void 0:v.duration,children:x=>g.jsx(eo,{active:o.trapFocus&&o.opened,innerRef:O,children:g.jsxs(Ae,{...D,...m,variant:t,onKeyDownCapture:po(()=>{var T,P;(T=o.onClose)==null||T.call(o),(P=o.onDismiss)==null||P.call(o)},{active:o.closeOnEscape,onTrigger:R,onKeyDown:n}),"data-position":o.placement,"data-fixed":o.floatingStrategy==="fixed"||void 0,...o.getStyles("dropdown",{className:r,props:s,classNames:c,styles:f,style:[{...x,zIndex:o.zIndex,top:o.y??0,left:o.x??0,width:o.width==="target"?void 0:Ve(o.width),...o.referenceHidden?{display:"none"}:null},o.resolvedStyles.dropdown,f==null?void 0:f.dropdown,i]}),children:[l,g.jsx(Ze,{ref:o.arrowRef,arrowX:o.arrowX,arrowY:o.arrowY,visible:o.withArrow,position:o.placement,arrowSize:o.arrowSize,arrowRadius:o.arrowRadius,arrowOffset:o.arrowOffset,arrowPosition:o.arrowPosition,...o.getStyles("arrow",{props:s,classNames:c,styles:f})})]})})})})});z.classes=ae;z.displayName="@mantine/core/PopoverDropdown";const ho={refProp:"ref",popupType:"dialog"},ne=W((e,a)=>{const{children:s,refProp:r,popupType:i,...d}=N("PopoverTarget",ho,e);if(!oo(s))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const l=d,n=se(),t=ee(n.reference,Ge(s),a),c=n.withRoles?{"aria-haspopup":i,"aria-expanded":n.opened,"aria-controls":n.getDropdownId(),id:n.getTargetId()}:{};return w.cloneElement(s,{...l,...c,...n.targetProps,className:$e(n.targetProps.className,l.className,s.props.className),[r]:t,...n.controlled?null:{onClick:n.onToggle}})});ne.displayName="@mantine/core/PopoverTarget";function vo(e){if(e===void 0)return{shift:!0,flip:!0};const a={...e};return e.shift===void 0&&(a.shift=!0),e.flip===void 0&&(a.flip=!0),a}function yo(e,a,s){const r=vo(e.middlewares),i=[ro(e.offset),so()];return e.dropdownVisible&&s!=="test"&&(r.flip=!1,r.shift=!1),r.shift&&i.push(ao(typeof r.shift=="boolean"?{limiter:J(),padding:5}:{limiter:J(),padding:5,...r.shift})),r.flip&&i.push(typeof r.flip=="boolean"?Z():Z(r.flip)),r.inline&&i.push(typeof r.inline=="boolean"?G():G(r.inline)),i.push(no({element:e.arrowRef,padding:e.arrowOffset})),(r.size||e.width==="target")&&i.push(io({...typeof r.size=="boolean"?{}:r.size,apply({rects:d,availableWidth:l,availableHeight:n,...t}){var m;const f=((m=a().refs.floating.current)==null?void 0:m.style)??{};r.size&&(typeof r.size=="object"&&r.size.apply?r.size.apply({rects:d,availableWidth:l,availableHeight:n,...t}):Object.assign(f,{maxWidth:`${l}px`,maxHeight:`${n}px`})),e.width==="target"&&Object.assign(f,{width:`${d.reference.width}px`})}})),i}function xo(e){const a=te(),[s,r]=Ye({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),i=w.useRef(s),d=()=>{s&&!e.disabled&&r(!1)},l=()=>!e.disabled&&r(!s),n=to({strategy:e.strategy,placement:e.positionRef.current,middleware:yo(e,()=>n,a),whileElementsMounted:lo});return F(()=>{var t;(t=e.onPositionChange)==null||t.call(e,n.placement),e.positionRef.current=n.placement},[n.placement]),F(()=>{var t,c;s!==i.current&&(s?(c=e.onOpen)==null||c.call(e):(t=e.onClose)==null||t.call(e)),i.current=s},[s,e.onClose,e.onOpen]),F(()=>{let t=-1;return s&&(t=window.setTimeout(()=>e.setDropdownVisible(!0),4)),()=>{window.clearTimeout(t)}},[s,e.position]),{floating:n,controlled:typeof e.opened=="boolean",opened:s,onClose:d,onToggle:l}}const Po={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,hideDetached:!0,clickOutsideEvents:["mousedown","touchstart"],zIndex:Ke("popover"),__staticSelector:"Popover",width:"max-content"},bo=Le((e,{radius:a,shadow:s})=>({dropdown:{"--popover-radius":a===void 0?void 0:Xe(a),"--popover-shadow":Ue(s)}}));function S(e){var H,L,U,X,Y,B,q;const a=N("Popover",Po,e),{children:s,position:r,offset:i,onPositionChange:d,positionDependencies:l,opened:n,transitionProps:t,onExitTransitionEnd:c,onEnterTransitionEnd:f,width:m,middlewares:o,withArrow:R,arrowSize:D,arrowOffset:O,arrowRadius:C,arrowPosition:E,unstyled:y,classNames:v,styles:x,closeOnClickOutside:T,withinPortal:P,portalProps:ie,closeOnEscape:le,clickOutsideEvents:de,trapFocus:ce,onClose:ue,onDismiss:b,onOpen:fe,onChange:pe,zIndex:we,radius:ge,shadow:me,id:he,defaultOpened:j,__staticSelector:k,withRoles:ve,disabled:I,returnFocus:ye,variant:xe,keepMounted:Pe,vars:be,floatingStrategy:M,withOverlay:Re,overlayProps:h,hideDetached:De,...Oe}=a,_=He({name:k,props:a,classes:ae,classNames:v,styles:x,unstyled:y,rootSelector:"dropdown",vars:be,varsResolver:bo}),{resolvedStyles:Ce}=Be({classNames:v,styles:x,props:a}),[Ee,A]=w.useState(n??j??!1),V=w.useRef(r),$=w.useRef(null),[Te,Se]=w.useState(null),[Fe,Ne]=w.useState(null),{dir:ze}=qe(),je=te(),K=Je(he),u=xo({middlewares:o,width:m,position:Qe(ze,r),offset:typeof i=="number"?i+(R?D/2:0):i,arrowRef:$,arrowOffset:O,onPositionChange:d,positionDependencies:l,opened:n,defaultOpened:j,onChange:pe,onOpen:fe,onClose:ue,onDismiss:b,strategy:M,dropdownVisible:Ee,setDropdownVisible:A,positionRef:V,disabled:I});wo(()=>{T&&(u.onClose(),b==null||b())},de,[Te,Fe]);const ke=w.useCallback(p=>{Se(p),u.floating.refs.setReference(p)},[u.floating.refs.setReference]),Ie=w.useCallback(p=>{Ne(p),u.floating.refs.setFloating(p)},[u.floating.refs.setFloating]),Me=w.useCallback(()=>{var p;(p=t==null?void 0:t.onExited)==null||p.call(t),c==null||c(),A(!1),V.current=r},[t==null?void 0:t.onExited,c]),_e=w.useCallback(()=>{var p;(p=t==null?void 0:t.onEntered)==null||p.call(t),f==null||f()},[t==null?void 0:t.onEntered,f]);return g.jsxs(go,{value:{returnFocus:ye,disabled:I,controlled:u.controlled,reference:ke,floating:Ie,x:u.floating.x,y:u.floating.y,arrowX:(U=(L=(H=u.floating)==null?void 0:H.middlewareData)==null?void 0:L.arrow)==null?void 0:U.x,arrowY:(B=(Y=(X=u.floating)==null?void 0:X.middlewareData)==null?void 0:Y.arrow)==null?void 0:B.y,opened:u.opened,arrowRef:$,transitionProps:{...t,onExited:Me,onEntered:_e},width:m,withArrow:R,arrowSize:D,arrowOffset:O,arrowRadius:C,arrowPosition:E,placement:u.floating.placement,trapFocus:ce,withinPortal:P,portalProps:ie,zIndex:we,radius:ge,shadow:me,closeOnEscape:le,onDismiss:b,onClose:u.onClose,onToggle:u.onToggle,getTargetId:()=>`${K}-target`,getDropdownId:()=>`${K}-dropdown`,withRoles:ve,targetProps:Oe,__staticSelector:k,classNames:v,styles:x,unstyled:y,variant:xe,keepMounted:Pe,getStyles:_,resolvedStyles:Ce,floatingStrategy:M,referenceHidden:De&&je!=="test"?(q=u.floating.middlewareData.hide)==null?void 0:q.referenceHidden:!1},children:[s,Re&&g.jsx(re,{transition:"fade",mounted:u.opened,duration:(t==null?void 0:t.duration)||250,exitDuration:(t==null?void 0:t.exitDuration)||250,children:p=>g.jsx(oe,{withinPortal:P,children:g.jsx(co,{...h,..._("overlay",{className:h==null?void 0:h.className,style:[p,h==null?void 0:h.style]})})})})]})}S.Target=ne;S.Dropdown=z;S.displayName="@mantine/core/Popover";S.extend=e=>e;export{S as P};
