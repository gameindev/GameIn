import{a as c,R as y,ah as I,ai as j,f as B,u as N,j as P}from"./index-C-4AFNO7.js";import{g as M}from"./get-env-uyVen0u2.js";import{c as W}from"./useApi-D27OJqXo.js";var $=c.useLayoutEffect,G=function(e){var r=y.useRef(e);return $(function(){r.current=e}),r},H=function(e,r){if(typeof e=="function"){e(r);return}e.current=r},O=function(e,r){var t=y.useRef();return y.useCallback(function(i){e.current=i,t.current&&H(t.current,null),t.current=r,r&&H(r,i)},[r])},E={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},Y=function(e){Object.keys(E).forEach(function(r){e.style.setProperty(r,E[r],"important")})},T=Y,o=null,C=function(e,r){var t=e.scrollHeight;return r.sizingStyle.boxSizing==="border-box"?t+r.borderSize:t-r.paddingSize};function q(n,e,r,t){r===void 0&&(r=1),t===void 0&&(t=1/0),o||(o=document.createElement("textarea"),o.setAttribute("tabindex","-1"),o.setAttribute("aria-hidden","true"),T(o)),o.parentNode===null&&document.body.appendChild(o);var i=n.paddingSize,u=n.borderSize,a=n.sizingStyle,h=a.boxSizing;Object.keys(a).forEach(function(l){var m=l;o.style[m]=a[m]}),T(o),o.value=e;var s=C(o,n);o.value=e,s=C(o,n),o.value="x";var f=o.scrollHeight-i,g=f*r;h==="border-box"&&(g=g+i+u),s=Math.max(g,s);var v=f*t;return h==="border-box"&&(v=v+i+u),s=Math.min(v,s),[s,f]}var F=function(){},U=function(e,r){return e.reduce(function(t,i){return t[i]=r[i],t},{})},X=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],Z=!!document.documentElement.currentStyle,D=function(e){var r=window.getComputedStyle(e);if(r===null)return null;var t=U(X,r),i=t.boxSizing;if(i==="")return null;Z&&i==="border-box"&&(t.width=parseFloat(t.width)+parseFloat(t.borderRightWidth)+parseFloat(t.borderLeftWidth)+parseFloat(t.paddingRight)+parseFloat(t.paddingLeft)+"px");var u=parseFloat(t.paddingBottom)+parseFloat(t.paddingTop),a=parseFloat(t.borderBottomWidth)+parseFloat(t.borderTopWidth);return{sizingStyle:t,paddingSize:u,borderSize:a}},J=D;function R(n,e,r){var t=G(r);c.useLayoutEffect(function(){var i=function(a){return t.current(a)};if(n)return n.addEventListener(e,i),function(){return n.removeEventListener(e,i)}},[])}var K=function(e,r){R(document.body,"reset",function(t){e.current.form===t.target&&r(t)})},Q=function(e){R(window,"resize",e)},V=function(e){R(document.fonts,"loadingdone",e)},ee=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],te=function(e,r){var t=e.cacheMeasurements,i=e.maxRows,u=e.minRows,a=e.onChange,h=a===void 0?F:a,s=e.onHeightChange,f=s===void 0?F:s,g=I(e,ee),v=g.value!==void 0,l=c.useRef(null),m=O(l,r),L=c.useRef(0),b=c.useRef(),p=function(){var d=l.current,z=t&&b.current?b.current:J(d);if(z){b.current=z;var w=q(z,d.value||d.placeholder||"x",u,i),x=w[0],k=w[1];L.current!==x&&(L.current=x,d.style.setProperty("height",x+"px","important"),f(x,{rowHeight:k}))}},A=function(d){v||p(),h(d)};return c.useLayoutEffect(p),K(l,function(){if(!v){var S=l.current.value;requestAnimationFrame(function(){var d=l.current;d&&S!==d.value&&p()})}}),Q(p),V(p),c.createElement("textarea",j({},g,{onChange:A,ref:m}))},re=c.forwardRef(te);const ne={},_=B((n,e)=>{const{autosize:r,maxRows:t,minRows:i,__staticSelector:u,resize:a,...h}=N("Textarea",ne,n),s=r&&M()!=="test",f=s?{maxRows:t,minRows:i}:{};return P.jsx(W,{component:s?re:"textarea",ref:e,...h,__staticSelector:u||"Textarea",multiline:!0,"data-no-overflow":r&&t===void 0||void 0,__vars:{"--input-resize":a},...f})});_.classes=W.classes;_.displayName="@mantine/core/Textarea";export{_ as T};
