import{f as w,u as C,j as v,B as N,g as H,s as X,w as q,y as K,c as M,v as W,q as G,k as J,l as Q,r as $,W as A,X as Y,P as Z}from"./index-DCh2P-fd.js";import{u as ss}from"./authSlice-DKg5m0nA.js";import{c as es}from"./create-safe-context-D-Xolrqc.js";import{g as ts}from"./get-auto-contrast-value-Da6zqqWm.js";import{f as rs,A as os,u as as,b as ns,s as U,o as is}from"./FormField-eflxWr3x.js";const[cs,V]=es("Progress.Root component was not found in tree");var h={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const ls={},E=w((s,n)=>{const{classNames:e,className:t,style:o,styles:a,vars:i,...r}=C("ProgressLabel",ls,s),c=V();return v.jsx(N,{ref:n,...c.getStyles("label",{className:t,style:o,classNames:e,styles:a}),...r})});E.classes=h;E.displayName="@mantine/core/ProgressLabel";const us={},ms=X((s,{size:n,radius:e,transitionDuration:t})=>({root:{"--progress-size":K(n,"progress-size"),"--progress-radius":e===void 0?void 0:q(e),"--progress-transition-duration":typeof t=="number"?`${t}ms`:void 0}})),R=w((s,n)=>{const e=C("ProgressRoot",us,s),{classNames:t,className:o,style:a,styles:i,unstyled:r,vars:c,autoContrast:l,transitionDuration:f,...m}=e,u=H({name:"Progress",classes:h,props:e,className:o,style:a,classNames:t,styles:i,unstyled:r,vars:c,varsResolver:ms});return v.jsx(cs,{value:{getStyles:u,autoContrast:l},children:v.jsx(N,{ref:n,...u("root"),...m})})});R.classes=h;R.displayName="@mantine/core/ProgressRoot";const ps={withAria:!0},x=w((s,n)=>{const{classNames:e,className:t,style:o,styles:a,vars:i,value:r,withAria:c,color:l,striped:f,animated:m,mod:u,...y}=C("ProgressSection",ps,s),S=V(),g=M(),j=c?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":r,"aria-valuetext":`${r}%`}:{};return v.jsx(N,{ref:n,...S.getStyles("section",{className:t,classNames:e,styles:a,style:o}),...y,...j,mod:[{striped:f||m,animated:m},u],__vars:{"--progress-section-width":`${r}%`,"--progress-section-color":G(l,g),"--progress-label-color":ts(S.autoContrast,g)?W({color:l,theme:g,autoContrast:S.autoContrast}):void 0}})});x.classes=h;x.displayName="@mantine/core/ProgressSection";const ds={},P=w((s,n)=>{const e=C("Progress",ds,s),{value:t,classNames:o,styles:a,vars:i,color:r,striped:c,animated:l,"aria-label":f,...m}=e,{resolvedClassNames:u,resolvedStyles:y}=ss({classNames:o,styles:a,props:e});return v.jsx(R,{ref:n,classNames:u,styles:y,vars:i,...m,children:v.jsx(x,{value:t,color:r,striped:c,animated:l,"aria-label":f})})});P.classes=h;P.displayName="@mantine/core/Progress";P.Section=x;P.Root=R;P.Label=E;const gs=async(s,n)=>{var o;const e={username:s.username,email:s.email,password:s.password,userType:((o=s.role)==null?void 0:o.toUpperCase())||"USER",dateOfBirth:rs(s.dob),isActive:!0,isVerified:!1},t={"Content-Type":"application/json","X-Captcha-Token":s.captcha||""};try{const{data:a}=await n(os.USERS.CREATE,e,t);return{userData:a,error:null}}catch(a){return{userData:null,error:(a==null?void 0:a.message)||"Something went wrong"}}};function hs({defaultValues:s,schema:n,onNext:e,onPrev:t,onSubmit:o,isFinalStep:a=!1}){const i=J(),r=Q(p=>{var d;return((d=p.multiStepForm)==null?void 0:d.formData)||{}}),[c,l]=$.useState(!1),{register:f,control:m,formState:{errors:u},trigger:y,getValues:S,setValue:g,watch:j,setFocus:F,handleSubmit:_}=as({resolver:n?is(n):void 0,mode:"onSubmit",defaultValues:{...s,...r}}),B=j();$.useEffect(()=>{Object.entries(s).forEach(([p])=>{r[p]!==void 0&&g(p,r[p])})},[r,s,g]);const D=async()=>{if(!await y(Object.keys(s))){const b=Object.keys(u)[0];F(b);return}const d=S();if(i(A(d)),a&&o){const b={...r,...d};return o(b)}e==null||e()},L=()=>{i(A(S())),t==null||t()},{post:k}=ns(),z=_(o?async p=>{const d=Object.fromEntries(Object.entries(p).filter(([I])=>Object.keys(s).includes(I)));i(A(d));const b={...r,...d};l(!0);const{userData:O,error:T}=await gs(b,k);if(l(!1),T){U("Registration failed",T,"red");return}if(O)return U("Registration successful","Please verify your mail id"),localStorage.removeItem("persist:multiStepForm"),i(Y()),i(Z(O)),o(b)}:D);return{register:f,control:m,errors:u,formValues:B,setValue:g,watch:j,trigger:y,setFocus:F,handleNextStep:D,handlePrevStep:L,handleSubmit:z,isSubmitting:c}}export{P,hs as u};
