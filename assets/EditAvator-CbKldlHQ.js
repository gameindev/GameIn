import{f as F,u as R,g as T,j as a,B as z,a1 as $,v as k,x as G,k as N,l as D,a as A,E as U,t as L,a2 as M,a3 as B,a4 as H}from"./index-BsMpUA29.js";import{H as J}from"./HexContainer-HPo-NZOT.js";import{c as O}from"./selectors-BfVctv7J.js";import{b as Y}from"./useApi-njmgOnjD.js";import{S as V}from"./Stack-DLHzTEgN.js";import{T as y}from"./Text-Cmlqrx0a.js";import{G as W}from"./Group-B0zyjYIO.js";import{I as X}from"./Image-BG9L0bwn.js";import{F as Z}from"./FileInput-gn5CM1sW.js";import{a as q}from"./DirectionProvider-BoNPA4J_.js";import{B as K}from"./Button-46LLuddq.js";var _={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const Q={},ee=k((r,{radius:c,color:i,variant:e,autoContrast:p})=>{const l=r.variantColorResolver({color:i||r.primaryColor,theme:r,variant:e||"light",autoContrast:p});return{root:{"--alert-radius":c===void 0?void 0:G(c),"--alert-bg":i||e?l.background:void 0,"--alert-color":l.color,"--alert-bd":i||e?l.border:void 0}}}),E=F((r,c)=>{const i=R("Alert",Q,r),{classNames:e,className:p,style:l,styles:j,unstyled:s,vars:C,radius:g,color:v,title:d,children:u,id:w,icon:f,withCloseButton:h,onClose:x,closeButtonLabel:b,variant:m,autoContrast:I,...t}=i,o=T({name:"Alert",classes:_,props:i,className:p,style:l,classNames:e,styles:j,unstyled:s,vars:C,varsResolver:ee}),n=q(w),P=d&&`${n}-title`||void 0,S=`${n}-body`;return a.jsx(z,{id:n,...o("root",{variant:m}),variant:m,ref:c,...t,role:"alert","aria-describedby":S,"aria-labelledby":P,children:a.jsxs("div",{...o("wrapper"),children:[f&&a.jsx("div",{...o("icon"),children:f}),a.jsxs("div",{...o("body"),children:[d&&a.jsx("div",{...o("title"),"data-with-close-button":h||void 0,children:a.jsx("span",{id:P,...o("label"),children:d})}),u&&a.jsx("div",{id:S,...o("message"),"data-variant":m,children:u})]}),h&&a.jsx($,{...o("closeButton"),onClick:x,variant:"transparent",size:16,iconSize:16,"aria-label":b,unstyled:s})]})})});E.classes=_;E.displayName="@mantine/core/Alert";function pe({type:r="avatar",close:c}){var h,x,b,m,I;const i=N(),{user:e}=D(O),{patch:p,loading:l}=Y();console.log(e);const j=t=>t?`http://localhost:3000/${t}`:null,[s,C]=A.useState({preview:j(r==="avatar"?(h=e==null?void 0:e.profileImage)==null?void 0:h.path:(x=e==null?void 0:e.coverImage)==null?void 0:x.path),file:null}),[g,v]=A.useState(null),d=(e==null?void 0:e.userType)===U.CREATOR?(b=e==null?void 0:e.creatorProfile)==null?void 0:b.id:(m=e==null?void 0:e.brandProfile)==null?void 0:m.id,u=(I=e==null?void 0:e.userType)==null?void 0:I.toLowerCase(),w=t=>{if(!t)return;if(!M.includes(t.type))return v("Only JPEG, JPG, PNG, or WEBP images are allowed.");if(t.size/1024/1024>B)return v(`File size should be less than ${B}MB.`);v(null);const o=new FileReader;o.onload=n=>{C({preview:n.target.result,file:t})},o.readAsDataURL(t)},f=async()=>{if(!s.file||!d)return;const t=new FormData;t.append(r==="avatar"?"profileImageFile":"coverImageFile",s.file);const o=`/${u}-profiles/${d}/${r==="avatar"?"profile-pic":"cover-pic"}`;try{await p(o,t,{"Content-Type":"multipart/form-data"}),i(H()),c()}catch(n){v("Failed to upload image.",n)}};return a.jsxs(V,{children:[a.jsx(y,{weight:500,size:"sm",children:r==="avatar"?"Profile Picture":"Cover Photo"}),r==="avatar"?a.jsx(W,{justify:"center",children:a.jsx(J,{size:200,background:L.colors.inputBgColor[0],children:s.preview?a.jsx("img",{src:s.preview,alt:"Avatar",style:{width:"100%",height:"100%",objectFit:"cover"}}):a.jsx(y,{size:"xs",c:"dimmed",ta:"center",mt:"xl",children:"No image available"})})}):s.preview?a.jsx(X,{src:s.preview,alt:"Cover Preview",radius:"md",withPlaceholder:!0,height:150,fit:"cover"}):a.jsx(y,{size:"xs",c:"dimmed",ta:"center",mt:"sm",children:"No image available"}),a.jsx(Z,{placeholder:`Select ${r==="avatar"?"Avatar":"Cover"} Image`,accept:"image/png,image/jpeg,image/webp",onChange:w,error:g}),g&&a.jsx(E,{color:"red",title:"Error",mt:"sm",children:g}),a.jsxs(K,{variant:"primary",onClick:f,loading:l,children:["Save ",r==="avatar"?"Avatar":"Cover"]})]})}export{pe as E};
